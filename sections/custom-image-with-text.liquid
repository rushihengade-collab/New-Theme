<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="container section--{{ section.settings.section_width }} color-{{ section.settings.color_scheme }} custom-image-with-text"
  style="
    {% if section.settings.background_image %}
      background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}');
      background-size: {{ section.settings.background_image_size }};
      background-position: {{ section.settings.background_image_position }};
      background-repeat: no-repeat;
    {% endif %}
    {% render 'spacing-style', settings: section.settings %}
  "
>
  <div class="custom-image-with-text-wrapper">
    <div class="custom-image-with-text-content">
      <div class="custom-image-with-text-image">
        {% if section.settings.image %}
          <img
            src="{{ section.settings.image | image_url: width: 1200 }}"
            alt="{{ section.settings.image.alt | default: 'Image' }}"
            loading="lazy"
            width="{{ section.settings.image.width }}"
            height="{{ section.settings.image.height }}"
          >
        {% endif %}
      </div>
      <div class="custom-image-with-text-text">
        <h2 class="custom-image-with-text-header2">
          {% if section.settings.header1 != blank %}
            {{ section.settings.header1 }}
          {% endif %}
        </h2>
        {% if section.settings.text != blank %}
          <p class="custom-image-with-text-text-text">
            {{ section.settings.text }}
          </p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<style>
  .custom-image-with-text {
    position: relative;
    min-height: 500px;
    margin-top: {{ section.settings.margin-top }}px;
    margin-bottom: {{ section.settings.margin-bottom }}px;
  }

  .custom-image-with-text-wrapper {
    position: relative;
    z-index: 1;
  }

  .custom-image-with-text-content {
    display: flex;
    align-items: center;
    gap: 30px;
  }
  .custom-image-with-text-header2 p{
    margin:0;
  }

  .custom-image-with-text-image {
    flex: 0 0 50%;
    {% if section.settings.image_position == 'right' %}
      order: 2;
    {% endif %}
  }

  .custom-image-with-text-image img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  .custom-image-with-text-text {
    flex: 0 0 50%;
    {% if section.settings.image_position == 'right' %}
      order: 1;
    {% endif %}
    padding: 40px;
    padding-top:0;
  }

  .custom-image-with-text-header1:last-child,
  .custom-image-with-text-header2:last-child,
  .custom-image-with-text-header3:last-child {
    margin-bottom: 0;
  }

  @media (max-width: 768px) {
    .custom-image-with-text-content {
      flex-direction: column;
      gap: 30px;
    }
    .custom-image-with-text {
        margin-top: {{ section.settings.margin-top | times: 0.9 }}px;
        margin-bottom: {{ section.settings.margin-bottom | times: 0.9 }}px;
      }
    .custom-image-with-text-text{
        padding-inline:0;
    }

    .custom-image-with-text-image {
      order: 1 !important;
    }

    .custom-image-with-text-text {
      order: 2 !important;
    }
  }

  @media (max-width: 480px) {
    .custom-image-with-text-wrapper {

    }

    .custom-image-with-text-content {
      gap: 20px;
    }

    .custom-image-with-text-header1{
      margin-bottom: 20px;
    }

    .custom-image-with-text-text {
      padding: 30px 0px;
    }
    .custom-image-with-text {
        margin-top: {{ section.settings.margin-top | times: 0.85 }}px;
        margin-bottom: {{ section.settings.margin-bottom | times: 0.85 }}px;
      }
  }
</style>

{% schema %}
{
  "name": "Custom Image with Text",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "select",
      "id": "background_image_size",
      "label": "Background Image Size",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        },
        {
          "value": "auto",
          "label": "Auto"
        }
      ],
      "default": "cover"
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "Background Image Position",
      "options": [
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        },
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "richtext",
      "id": "header1",
      "label": "Header 1"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "options": [
        {
          "value": "page-width",
          "label": "Page Width"
        },
        {
          "value": "full-width",
          "label": "Full Width"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "margin-top",
      "label": "Margin Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin-bottom",
      "label": "Margin Bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Custom Image with Text"
    }
  ]
}
{% endschema %}
